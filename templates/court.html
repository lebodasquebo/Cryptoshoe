<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Courtroom - Cryptoshoe</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/static/style.css">
  <link rel="stylesheet" href="/static/court.css">
</head>
<body>
  <div class="bg-grid"></div>
  <nav class="navbar">
    <div class="nav-inner">
      <a href="/" class="nav-logo">
        <span class="logo-icon">ğŸ‘Ÿ</span>
        <span class="logo-text">CRYPTO<span class="accent">SHOE</span></span>
      </a>
      <div class="nav-links">
        <a href="/" class="nav-link"><span class="nav-icon">ğŸ“ˆ</span><span class="nav-text">Market</span></a>
        <a href="/inventory" class="nav-link"><span class="nav-icon">ğŸ’</span><span class="nav-text">Inventory</span></a>
        <a href="/lootbox" class="nav-link"><span class="nav-icon">ğŸ</span><span class="nav-text">Lootbox</span></a>
        <a href="/appraise" class="nav-link"><span class="nav-icon">ğŸ”</span><span class="nav-text">Appraise</span></a>
        <a href="/users" class="nav-link"><span class="nav-icon">ğŸ‘¥</span><span class="nav-text">Users</span></a>
        <a href="/court" class="nav-link active"><span class="nav-icon">âš–ï¸</span><span class="nav-text">Court</span></a>
        {% if is_admin %}
        <a href="/admin" class="nav-link nav-admin"><span class="nav-icon">ğŸ”</span><span class="nav-text">Admin</span></a>
        {% endif %}
      </div>
      <div class="nav-user">
        <div class="nav-bal"><div class="bal-label">BALANCE</div><div class="bal-val">$<span id="bal">0.00</span></div></div>
        <a href="/logout" class="nav-logout" title="Logout">ğŸšª</a>
      </div>
    </div>
  </nav>
  
  <main class="court-main">
    <div class="court-inactive" id="court-inactive">
      <div class="inactive-icon">âš–ï¸</div>
      <h1>COURT NOT IN SESSION</h1>
      <p>No trial is currently happening. Check back later!</p>
    </div>
    
    <div class="court-active hidden" id="court-active">
      <div class="court-header">
        <h1>âš–ï¸ COURTROOM</h1>
        <div class="court-status" id="court-status">TRIAL IN PROGRESS</div>
      </div>
      
      <div class="court-layout">
        <div class="court-main-col">
          <div class="defendant-box">
            <div class="defendant-label">ğŸ”´ DEFENDANT</div>
            <div class="defendant-name" id="defendant-name">Loading...</div>
            <div class="defendant-accusation">
              <span class="accusation-label">ACCUSED OF:</span>
              <span id="accusation-text">...</span>
            </div>
          </div>
          
          <div class="chat-box">
            <div class="chat-header">ğŸ’¬ COURTROOM CHAT</div>
            <div class="chat-messages" id="chat-messages"></div>
            <div class="chat-input-wrap">
              <input type="text" id="chat-input" placeholder="Speak to the court..." maxlength="200">
              <button id="chat-send">Send</button>
            </div>
          </div>
        </div>
        
        <div class="court-side-col">
          <div class="jury-box">
            <div class="jury-header">ğŸ‘¥ JURY VOTE</div>
            <div class="jury-counts">
              <div class="jury-count guilty">
                <span class="count-num" id="guilty-count">0</span>
                <span class="count-label">GUILTY</span>
              </div>
              <div class="jury-count innocent">
                <span class="count-num" id="innocent-count">0</span>
                <span class="count-label">INNOCENT</span>
              </div>
            </div>
            <div class="jury-buttons" id="jury-buttons">
              <button class="vote-btn guilty-btn" id="vote-guilty">ğŸ‘ GUILTY</button>
              <button class="vote-btn innocent-btn" id="vote-innocent">ğŸ‘ INNOCENT</button>
            </div>
            <div class="jury-voted hidden" id="jury-voted">
              <span>Your vote: </span><strong id="my-vote-text"></strong>
            </div>
            <div class="defendant-notice hidden" id="defendant-notice">
              You are the defendant - you cannot vote!
            </div>
          </div>
          
          {% if is_admin %}
          <div class="judge-box">
            <div class="judge-header">ğŸ”¨ JUDGE CONTROLS</div>
            <div class="judge-controls">
              <input type="text" id="new-accusation" placeholder="Add accusation...">
              <button onclick="addAccusation()">Accuse!</button>
              <div class="verdict-btns">
                <button class="verdict-btn guilty-verdict" onclick="deliverVerdict('guilty')">GUILTY</button>
                <button class="verdict-btn innocent-verdict" onclick="deliverVerdict('innocent')">INNOCENT</button>
              </div>
              <input type="text" id="punishment" placeholder="Punishment (for guilty)">
              <button class="end-btn" onclick="endCourt()">End Court Session</button>
            </div>
          </div>
          {% endif %}
        </div>
      </div>
    </div>
  </main>
  
  {% if is_admin %}
  <div class="admin-start-panel" id="admin-start">
    <h3>âš–ï¸ Start New Trial</h3>
    <input type="text" id="trial-defendant" placeholder="Defendant username">
    <input type="text" id="trial-accusation" placeholder="Accusation (e.g. insider trading)">
    <button onclick="startTrial()">Start Trial</button>
  </div>
  {% endif %}
  
  <div id="toast" class="toast"></div>
  <script>window.IS_ADMIN = {{ 'true' if is_admin else 'false' }};</script>
  <script src="/static/court.js"></script>
</body>
</html>
